* vcs
** git/magit
:PROPERTIES:
:ID:       2945a736-1523-4cd8-8b7c-a58fed61f7f8
:END:
#+name: magit-and-git-config
#+begin_src emacs-lisp
  (global-set-key [?\C-x ?g] 'magit-status)
  (global-set-key [?\C-x ?L] 'magit-file-log)

  (autoload 'git-status "git" "" t)
  (autoload 'git-blame-mode "git-blame"
  (autoload 'magit-status "magit" "" t)
    "Minor mode for incremental blame for Git." t)
#+end_src

*** git-wip
#+name: git-wip
#+begin_src emacs-lisp
  (require 'magit)
  (global-magit-wip-save-mode)
#+end_src

*** git in English
#+name: git-english
#+begin_src fundamental
  (defadvice magit-start-process (around lang-en_US activate)
    "Set LANG to en_US."
    (let ((process-environment process-environment))
      (setenv "LANG" "en_US.utf8")
      ad-do-it))

  (defadvice magit-call-process (around lang-en_US activate)
    "Set LANG to en_US."
    (let ((process-environment process-environment))
      (setenv "LANG" "en_US.utf8")
      ad-do-it))
#+end_src

*** git annex
#+name: git-annex
#+begin_src emacs-lisp
  (require 'git-annex)
  (require 'magit-annex () t)

  (with-eval-after-load 'dired
    (define-key dired-mode-map [@ e] 'magit-annex-edit-dired)
    (define-key dired-mode-map [@ g] 'magit-annex-get-dired))
#+end_src

** vc
#+name: emacs-vc-config
#+begin_src emacs-lisp
  (with-eval-after-load "vc-hooks"
    (define-key vc-prefix-map "=" 'ediff-revision))
  (add-to-list 'vc-handled-backends 'GIT)
#+end_src

** vcsh by tramp
#+name: vsh-by-tramp
#+begin_src emacs-lisp
  (with-eval-after-load 'tramp
    (add-to-list 'tramp-methods '("vcsh"
                                   (tramp-login-program "vcsh")
                                   (tramp-login-args
                                    (("enter")
                                     ("%h")))
                                   (tramp-remote-shell "/bin/sh")
                                   (tramp-remote-shell-args
                                    ("-c")))))
#+end_src
